---
description: 110% certainty rule - investigate until absolutely sure, then fix, test, deploy, document
---

# 110% Certainty Protocol

**If you are 110% sure of the issues and solutions, proceed. If not, investigate and plan more until you are 110% sure.**

---

## Phase 1: Certainty Check

Before ANY fix, I must answer YES to ALL of these:

| Question | Required Answer |
|----------|-----------------|
| Do I understand the ROOT CAUSE? | YES |
| Have I VERIFIED my assumptions with live data/code? | YES |
| Do I know EXACTLY what to change? | YES |
| Do I know what SIDE EFFECTS this could have? | YES |
| Have I checked if this affects OTHER components? | YES |
| Can I EXPLAIN the fix to a 5-year-old? | YES |

**If ANY answer is NO** → Go to Phase 1.5 (Investigation Loop)

---

## Phase 1.5: Investigation Loop (if not 110% sure)

Repeat until 110% certain:

1. **Read the actual code/config** - not from memory
2. **Trace the data flow** - inputs → processing → outputs
3. **Check logs/errors** - what ACTUALLY happened vs what I assume
4. **Test current behavior** - verify the problem exists as described
5. **Search for similar patterns** - how was this solved elsewhere?
6. **Verify against live systems** - webhooks, APIs, databases
7. **Document findings** - capture what I learned

**Loop back to Phase 1 Certainty Check** after each investigation round.

---

## Phase 2: Apply Fixes (only when 110% sure)

1. Create todo list of ALL changes needed
2. For each fix:
   - State WHAT I'm changing and WHY
   - Show the BEFORE and AFTER
   - Apply the change
   - Mark todo as complete
3. Handle COUPLED fixes together (agent + n8n)

---

## Phase 3: Test Everything

| Test Type | Action |
|-----------|--------|
| **Unit test** | Test the specific fix in isolation |
| **Integration test** | Test with connected systems |
| **Regression test** | Verify nothing else broke |
| **Edge cases** | Test unusual inputs, empty values, errors |

**All tests must use Peter Ball test data:**
- Patient ID: `1805465202989210063`
- Phone: `0412111000`

---

## Phase 4: Make Live

1. Deploy to production
2. Connect phone lines (if applicable)
3. Git commit and push ALL changes
4. Verify live deployment is working

---

## Phase 5: Further Testing

After live deployment:

1. **Smoke test** - Quick sanity check that basics work
2. **End-to-end test** - Full flow from start to finish
3. **Monitoring** - Check for errors in logs
4. **User perspective test** - What would a real caller experience?

---

## Phase 6: Capture Learnings

Document new insights discovered:

```markdown
## New Learnings from [Date]

### What I Learned
1. [Insight 1]
2. [Insight 2]
...

### What Tripped Me Up
1. [Gotcha 1]
2. [Gotcha 2]
...

### Future Prevention
1. [How to avoid this issue next time]
...
```

---

## Phase 7: Update All Relevant Docs

Check and update as needed:

| Document | Update If... |
|----------|--------------|
| `CLAUDE.md` | New rules, gotchas, or patterns discovered |
| `RETELLAI_WEBHOOKS_CURRENT.md` | Webhook params/responses changed |
| `RETELLAI_REFERENCE.md` | New RetellAI patterns learned |
| `AGENT_DEVELOPMENT_GUIDE.md` | New agent development rules |
| `BOOKING_FLOW_TROUBLESHOOTING.md` | Booking-related fixes |
| Agent README/changelog | Version changes |

Run doc generator if n8n changed:
```bash
cd /c/Users/peter/Downloads/CC/n8n/Python
python CC-Made-generate-workflow-docs.py
```

---

## Final Output

End with:

```
110% COMPLETE

Changes Made:
- [List each change]

Tests Passed:
- [List each test]

Live URLs:
- [If applicable]

New Learnings:
- [Key insights]

Docs Updated:
- [List updated docs]

DONE DONE DONE

Files created/modified:
- [Full paths]
```

---

## The 110% Mindset

> "Measure twice, cut once."

- **Rushing causes bugs** - Take the time to understand
- **Assumptions are dangerous** - Verify everything
- **Documentation prevents repeat mistakes** - Write it down
- **Testing catches surprises** - Test more than you think necessary
- **Confidence comes from thoroughness** - When you're 110% sure, you'll know
